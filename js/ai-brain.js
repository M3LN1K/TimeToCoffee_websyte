// AI Brain - –°–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è –∫–æ—Ñ–µ–π–Ω–∏
class CoffeeAI {
    constructor() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–≤–æ–π—Å—Ç–≤–∞
        this.learningRate = 0.1;
        this.unknownQuestions = [];
        this.conversationHistory = [];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è
        this.knowledgeBase = this.initKnowledgeBase();
        
        // –ù–∞—á–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        this.categoryWeights = {
            '–º–µ–Ω—é': 1.0,
            '–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è': 1.0,
            '–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ': 1.0,
            '—Ü–µ–Ω—ã': 1.0,
            '–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã': 1.0,
            '–ª–æ–∫–∞—Ü–∏—è': 1.0,
            '–∫–æ—Ñ–µ': 1.0,
            '–¥–µ—Å–µ—Ä—Ç—ã': 1.0,
            '–∏—Å—Ç–æ—Ä–∏—è': 1.0,
            '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è': 1.0,
            '—É—Å–ª—É–≥–∏': 1.0,
            '–∫–æ–Ω—Ç–∞–∫—Ç—ã': 1.0,
            '–¥–æ—Å—Ç–∞–≤–∫–∞': 1.0,
            '–≤–µ–≥–∞–Ω': 1.0
        };

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        this.loadSavedData();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π
    initKnowledgeBase() {
        return {
            '–º–µ–Ω—é': {
                patterns: ['–º–µ–Ω—é', '—á—Ç–æ –µ—Å—Ç—å', '–Ω–∞–ø–∏—Ç–∫–∏', '–µ–¥–∞', '–∫—É—Ö–Ω—è', '–∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç', '–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è', '—á—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å'],
                responses: [
                    `–£ –Ω–∞—Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –º–µ–Ω—é —Å —è–ø–æ–Ω—Å–∫–∏–º –∞–∫—Ü–µ–Ω—Ç–æ–º! üçµ

‚òï **–ö–æ—Ñ–µ:**
‚Ä¢ –Ø–ø–æ–Ω—Å–∫–∏–π –ª–∞—Ç—Ç–µ - 350‚ÇΩ
‚Ä¢ –≠—Å–ø—Ä–µ—Å—Å–æ –°–∞–∫—É—Ä–∞ - 280‚ÇΩ
‚Ä¢ –ú–∞—Ç—á–∞ –ª–∞—Ç—Ç–µ - 380‚ÇΩ
‚Ä¢ –ö–∏–æ—Ç—Å–∫–∏–π –∫–∞–ø—É—á–∏–Ω–æ - 320‚ÇΩ

üçµ **–ß–∞–π:**
‚Ä¢ –ß–∞–π –¶–≤–µ—Ç–µ–Ω–∏–µ –°–∞–∫—É—Ä—ã - 290‚ÇΩ
‚Ä¢ –ò–º–±–∏—Ä–Ω—ã–π —á–∞–π —Å –º–µ–¥–æ–º - 270‚ÇΩ

üç∞ **–î–µ—Å–µ—Ä—Ç—ã:**
‚Ä¢ –ú–∞—Ç—á–∞ —Ç–∏—Ä–∞–º–∏—Å—É - 420‚ÇΩ
‚Ä¢ –î–æ—Ä–∞—è–∫–∏ - 380‚ÇΩ
‚Ä¢ –í–µ–≥–∞–Ω –º–æ—Ç–∏ - 340‚ÇΩ

üéØ **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:**
‚Ä¢ –ö–æ—Ñ–µ–π–Ω—ã–π —Å–µ—Ç - 890‚ÇΩ
‚Ä¢ –Ø–ø–æ–Ω—Å–∫–∏–π –∑–∞–≤—Ç—Ä–∞–∫ - 650‚ÇΩ

–ü–æ–ª–Ω–æ–µ –º–µ–Ω—é —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ!`
                ],
                confidence: 0.9,
                learnedCount: 0
            },

            '–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è': {
                patterns: ['–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', '—Å–æ–±—ã—Ç–∏—è', '–≤–µ—á–µ—Ä–∏–Ω–∫', '–≤—Å—Ç—Ä–µ—á', '–º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å', '–≥–∞–¥–∞–Ω–∏', '–∫–æ—Å–ø–ª–µ–π', '–∞–Ω–∏–º–µ', '–∏–≤–µ–Ω—Ç'],
                responses: [
                    `–ú—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è! üé≠

üìÖ **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:**
‚Ä¢ **–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –ø–æ –∫–æ—Ñ–µ** - –∫–∞–∂–¥—É—é —Å—É–±–±–æ—Ç—É
‚Ä¢ **–ì–∞–¥–∞–Ω–∏—è –Ω–∞ –∫–æ—Ñ–µ–π–Ω–æ–π –≥—É—â–µ** - –ø—è—Ç–Ω–∏—Ü–∞ –∏ —Å—É–±–±–æ—Ç–∞
‚Ä¢ **–ö–æ—Å–ø–ª–µ–π-–≤–µ—á–µ—Ä–∞** - –∫–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏
‚Ä¢ **–ê–Ω–∏–º–µ-–ø–æ–∫–∞–∑—ã** - –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º

üéüÔ∏è **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É +7 (495) 123-45-67`
                ],
                confidence: 0.85,
                learnedCount: 0
            },

            '–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ': {
                patterns: ['–±—Ä–æ–Ω—å', '–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å', '—Å—Ç–æ–ª–∏–∫', '—Ä–µ–∑–µ—Ä–≤', '–∑–∞–∫–∞–∑ —Å—Ç–æ–ª', '–∑–∞–ø–∏—Å–∞—Ç—å—Å—è'],
                responses: [
                    `–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª–∏–∫ –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏: üìÖ

1. **–ß–µ—Ä–µ–∑ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±
2. **–ü–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É** - +7 (495) 123-45-67
3. **–ß–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ** - –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"

üéÅ **–ü—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - —Å–∫–∏–¥–∫–∞ 5%!**`
                ],
                confidence: 0.88,
                learnedCount: 0
            },

            '—Ü–µ–Ω—ã': {
                patterns: ['—Ü–µ–Ω–∞', '—Å—Ç–æ–∏–º–æ—Å—Ç—å', '—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç', '—Ü–µ–Ω–Ω–∏–∫', '–¥–æ—Ä–æ–≥', '–¥–µ—à–µ–≤', '–ø—Ä–∞–π—Å'],
                responses: [
                    `–£ –Ω–∞—Å –¥–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω—ã–µ —Ü–µ–Ω—ã –∑–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—Ñ–µ! üí∞

‚òï **–ö–æ—Ñ–µ:** 280-380‚ÇΩ
üçµ **–ß–∞–π:** 270-330‚ÇΩ  
üç∞ **–î–µ—Å–µ—Ä—Ç—ã:** 340-450‚ÇΩ
üéØ **–°–µ—Ç—ã:** 450-1200‚ÇΩ

üí≥ **–ë–æ–Ω—É—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:**
‚Ä¢ 1 –Ω–∞–ø–∏—Ç–æ–∫ = 1 —à—Ç–∞–º–ø
‚Ä¢ 8 —à—Ç–∞–º–ø–æ–≤ = –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫!`
                ],
                confidence: 0.82,
                learnedCount: 0
            },

            '–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã': {
                patterns: ['–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã', '–æ—Ç–∫—Ä—ã—Ç', '–∑–∞–∫—Ä—ã—Ç', '—Ä–∞–±–æ—Ç–∞–µ—Ç–µ', '–≥—Ä–∞—Ñ–∏–∫', '—á–∞—Å—ã', '–∫–æ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ—Å—å'],
                responses: [
                    `–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –¥–ª—è –≤–∞—Å: üïê

**–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ß–µ—Ç–≤–µ—Ä–≥:** 8:00 - 23:00
**–ü—è—Ç–Ω–∏—Ü–∞:** 8:00 - 00:00  
**–°—É–±–±–æ—Ç–∞:** 9:00 - 00:00
**–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ:** 9:00 - 22:00

üìç **–ê–¥—Ä–µ—Å:** –¢—Ä—ë—Ö—Å–≤—è—Ç—Å–∫–∞—è —É–ª–∏—Ü–∞, 31, –¢–≤–µ—Ä—å`
                ],
                confidence: 0.9,
                learnedCount: 0
            },

            '–∫–æ—Ñ–µ': {
                patterns: ['–∫–æ—Ñ–µ', '–ª–∞—Ç—Ç–µ', '—ç—Å–ø—Ä–µ—Å—Å–æ', '–∫–∞–ø—É—á–∏–Ω–æ', '–∞–º–µ—Ä–∏–∫–∞–Ω–æ', '–º–∞—Ç—á–∞', '—Ä–∞—Ñ', '–Ω–∞–ø–∏—Ç–æ–∫'],
                responses: [
                    `–£ –Ω–∞—Å –æ—Ç–ª–∏—á–Ω—ã–π –∫–æ—Ñ–µ! ‚òï

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏:**
‚Ä¢ –Ø–ø–æ–Ω—Å–∫–∏–π –ª–∞—Ç—Ç–µ - 350‚ÇΩ (–º–∞—Ç—á–∞ + –≤–∞–Ω–∏–ª—å + —Å–∞–∫—É—Ä–∞)
‚Ä¢ –≠—Å–ø—Ä–µ—Å—Å–æ –°–∞–∫—É—Ä–∞ - 280‚ÇΩ (—Ü–≤–µ—Ç–æ—á–Ω—ã–µ –Ω–æ—Ç—ã)
‚Ä¢ –ú–∞—Ç—á–∞ –ª–∞—Ç—Ç–µ - 380‚ÇΩ (–Ω–∞—Å—Ç–æ—è—â–∏–π —è–ø–æ–Ω—Å–∫–∏–π –º–∞—Ç—á–∞)
‚Ä¢ –ö–∏–æ—Ç—Å–∫–∏–π –∫–∞–ø—É—á–∏–Ω–æ - 320‚ÇΩ (–Ω–∞ –º–∏–Ω–¥–∞–ª—å–Ω–æ–º –º–æ–ª–æ–∫–µ)

üéØ **–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —è–ø–æ–Ω—Å–∫–∏–π –ª–∞—Ç—Ç–µ - —ç—Ç–æ –Ω–∞—à–∞ –≤–∏–∑–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞!**`
                ],
                confidence: 0.87,
                learnedCount: 0
            },

            '–¥–µ—Å–µ—Ä—Ç—ã': {
                patterns: ['–¥–µ—Å–µ—Ä—Ç', '—Å–ª–∞–¥–∫–æ–µ', '—Ç–æ—Ä—Ç', '–ø–∏—Ä–æ–∂–Ω–æ–µ', '—Ç–∏—Ä–∞–º–∏—Å—É', '–º–æ—Ç–∏', '–¥–æ—Ä–∞—è–∫–∏', '—á–∏–∑–∫–µ–π–∫'],
                responses: [
                    `–ù–∞—à–∏ –¥–µ—Å–µ—Ä—Ç—ã - —ç—Ç–æ –æ–±—ä–µ–¥–µ–Ω–∏–µ! üç∞

**–Ø–ø–æ–Ω—Å–∫–∏–µ —Å–ª–∞–¥–æ—Å—Ç–∏:**
‚Ä¢ –î–æ—Ä–∞—è–∫–∏ - 380‚ÇΩ (–±–ª–∏–Ω—á–∏–∫–∏ —Å –±–æ–±–æ–≤–æ–π –ø–∞—Å—Ç–æ–π)
‚Ä¢ –í–µ–≥–∞–Ω –º–æ—Ç–∏ - 340‚ÇΩ (—Ä–∏—Å–æ–≤—ã–µ –ø–∏—Ä–æ–∂–Ω—ã–µ)
‚Ä¢ –ú–∞—Ç—á–∞ —Ç–∏—Ä–∞–º–∏—Å—É - 420‚ÇΩ (–∑–µ–ª–µ–Ω—ã–π —á–∞–π –≤–º–µ—Å—Ç–æ –∫–æ—Ñ–µ)

üé® **–í—Å–µ –¥–µ—Å–µ—Ä—Ç—ã –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ñ–æ—Ç–æ!`
                ],
                confidence: 0.83,
                learnedCount: 0
            },

            '–∏—Å—Ç–æ—Ä–∏—è': {
                patterns: ['–∏—Å—Ç–æ—Ä–∏—è', '–æ—Å–Ω–æ–≤–∞—Ç–µ–ª–∏', '—Å–æ–∑–¥–∞–Ω', '–æ—Ç–∫—Ä—ã–ª—Å—è', '–º–∞—Ä–∏—è', '—Ç–∞–∫–µ—à–∏', '–æ—Å–Ω–æ–≤–∞–Ω–∏–µ'],
                responses: [
                    `–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∞–ª–∞—Å—å —Å –º–µ—á—Ç—ã! üìñ

**2018 –≥–æ–¥** - –ú–∞—Ä–∏—è –∏ –¢–∞–∫–µ—à–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –ø–æ –Ø–ø–æ–Ω–∏–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–∏–ª–∏—Å—å –≥–∞—Ä–º–æ–Ω–∏–µ–π —á–∞–π–Ω—ã—Ö —Ü–µ—Ä–µ–º–æ–Ω–∏–π.

**2019 –≥–æ–¥** - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–≤–æ–π –∫–æ—Ñ–µ–π–Ω–∏.

**2022 –≥–æ–¥** - –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

üéØ **–§–∏–ª–æ—Å–æ—Ñ–∏—è:** "–ö–æ—Ñ–µ - —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª—é–¥–µ–π"

–û—Å–Ω–æ–≤–∞—Ç–µ–ª–∏: –ú–∞—Ä–∏—è (—Ä–æ—Å—Å–∏–π—Å–∫–∞—è –±–∞—Ä–∏—Å—Ç–∞) –∏ –¢–∞–∫–µ—à–∏ (—è–ø–æ–Ω—Å–∫–∏–π –∫–æ—Ñ–µ–π–Ω—ã–π –º–∞—Å—Ç–µ—Ä)`
                ],
                confidence: 0.8,
                learnedCount: 0
            },

            '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è': {
                patterns: ['—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è', '–∫–æ–Ω—Ü–µ–ø—Ü–∏—è', '–∏–¥–µ—è', '–º–∏—Å—Å–∏—è', '–≥–∞—Ä–º–æ–Ω–∏—è', '—è–ø–æ–Ω—Å–∫', '–∫—É–ª—å—Ç—É—Ä–∞'],
                responses: [
                    `–ù–∞—à–∞ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è - –≥–∞—Ä–º–æ–Ω–∏—è —Ç—Ä–∞–¥–∏—Ü–∏–π –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–π üéé

üå∏ **–Ø–ø–æ–Ω—Å–∫–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞:**
‚Ä¢ –ú–∏–Ω–∏–º–∞–ª–∏–∑–º –∏ –ø—Ä–æ—Å—Ç–æ—Ç–∞
‚Ä¢ –£–≤–∞–∂–µ–Ω–∏–µ –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
‚Ä¢ –í–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º

‚òï **–ö–æ—Ñ–µ–π–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ:**
‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–µ—Ä–Ω–∞
‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–∞—Ä–∏—Å—Ç–∞

üí´ **–ù–∞—à–∞ –º–∏—Å—Å–∏—è:** —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.`
                ],
                confidence: 0.75,
                learnedCount: 0
            },

            '—É—Å–ª—É–≥–∏': {
                patterns: ['—É—Å–ª—É–≥–∏', '–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ', '–º–æ–∂–Ω–æ –ª–∏', '–µ—Å—Ç—å –ª–∏', 'wi-fi', '–∏–Ω—Ç–µ—Ä–Ω–µ—Ç', '—Ä–∞–±–æ—Ç–∞—Ç—å', '–≤—Å—Ç—Ä–µ—á–∞'],
                responses: [
                    `–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞: üõéÔ∏è

üíª **–î–ª—è —Ä–∞–±–æ—Ç—ã –∏ —É—á–µ–±—ã:**
‚Ä¢ –ë—ã—Å—Ç—Ä—ã–π Wi-Fi
‚Ä¢ –£–¥–æ–±–Ω—ã–µ —Ä–æ–∑–µ—Ç–∫–∏
‚Ä¢ –¢–∏—Ö—ã–µ –∑–æ–Ω—ã

üéâ **–î–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π:**
‚Ä¢ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–æ–≤
‚Ä¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚Ä¢ –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤–æ—Ä–∫—à–æ–ø–æ–≤

‚òï **–ö–æ—Ñ–µ–π–Ω—ã–µ —É—Å–ª—É–≥–∏:**
‚Ä¢ –ü—Ä–µ–¥–∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ –ö–æ—Ñ–µ —Å —Å–æ–±–æ–π
‚Ä¢ –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã`
                ],
                confidence: 0.8,
                learnedCount: 0
            },

            '–∫–æ–Ω—Ç–∞–∫—Ç—ã': {
                patterns: ['–∫–æ–Ω—Ç–∞–∫—Ç—ã', '—Ç–µ–ª–µ—Ñ–æ–Ω', '–∞–¥—Ä–µ—Å', 'email', '—Å–≤—è–∑–∞—Ç—å—Å—è', '–Ω–∞–ø–∏—Å–∞—Ç—å', '–ø–æ–∑–≤–æ–Ω–∏—Ç—å'],
                responses: [
                    `–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ - –±—É–¥–µ–º —Ä–∞–¥—ã –æ–±—â–µ–Ω–∏—é! üìû

üìç **–ê–¥—Ä–µ—Å:** –¢—Ä—ë—Ö—Å–≤—è—Ç—Å–∫–∞—è —É–ª–∏—Ü–∞, 31, –¢–≤–µ—Ä—å

üìû **–¢–µ–ª–µ—Ñ–æ–Ω:** +7 (495) 123-45-67

üìß **Email:** TimeToCoffe@yandex.ru

‚è∞ **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**
–ü–Ω-–ß—Ç: 8:00-23:00, –ü—Ç: 8:00-00:00
–°–±: 9:00-00:00, –í—Å: 9:00-22:00`
                ],
                confidence: 0.9,
                learnedCount: 0
            },

            '–¥–æ—Å—Ç–∞–≤–∫–∞': {
                patterns: ['–¥–æ—Å—Ç–∞–≤–∫', '–ø—Ä–∏–≤–µ–∑—Ç–∏', '–∑–∞–∫–∞–∑ –Ω–∞ –¥–æ–º', '–¥–æ—Å—Ç–∞–≤—è', '–∫—É—Ä—å–µ—Ä'],
                responses: [
                    `–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–æ—Å—Ç–∞–≤–∫—É –º—ã –ø–æ–∫–∞ –Ω–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ–º üòî

–ù–æ —É –Ω–∞—Å –µ—Å—Ç—å –æ—Ç–ª–∏—á–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

üö∂ **–°–∞–º–æ–≤—ã–≤–æ–∑:**
‚Ä¢ –ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ –ó–∞–±–∏—Ä–∞–π—Ç–µ –±–µ–∑ –æ—á–µ—Ä–µ–¥–∏
‚Ä¢ –ì–æ—Ç–æ–≤–∏–º –∑–∞ 10-15 –º–∏–Ω—É—Ç

üì¶ **–°–∫–æ—Ä–æ –∑–∞–ø—É—Å—Ç–∏–º –¥–æ—Å—Ç–∞–≤–∫—É! –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏.`
                ],
                confidence: 0.85,
                learnedCount: 0
            },

            '–≤–µ–≥–∞–Ω': {
                patterns: ['–≤–µ–≥–∞–Ω', '–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫', '—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω', '–±–µ–∑ –º–æ–ª–æ–∫', '–±–µ–∑ —è–∏—Ü', '–±–µ–∑ –≥–ª—é—Ç–µ–Ω'],
                responses: [
                    `–£ –Ω–∞—Å –º–Ω–æ–≥–æ –æ–ø—Ü–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π! üå±

üçµ **–í–µ–≥–∞–Ω—Å–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏:**
‚Ä¢ –í—Å–µ —á–∞–∏ –∏ –º–∞—Ç—á–∞
‚Ä¢ –ö–æ—Ñ–µ –Ω–∞ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–º –º–æ–ª–æ–∫–µ
‚Ä¢ –°–æ–µ–≤–æ–µ, –º–∏–Ω–¥–∞–ª—å–Ω–æ–µ, –æ–≤—Å—è–Ω–æ–µ –º–æ–ª–æ–∫–æ

üç∞ **–í–µ–≥–∞–Ω—Å–∫–∏–µ –¥–µ—Å–µ—Ä—Ç—ã:**
‚Ä¢ –í–µ–≥–∞–Ω –º–æ—Ç–∏ - 340‚ÇΩ
‚Ä¢ –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π —á–∏–∑–∫–µ–π–∫ - 420‚ÇΩ
‚Ä¢ –ë–µ–∑–≥–ª—é—Ç–µ–Ω–æ–≤–æ–µ –ø–µ—á–µ–Ω—å–µ - 280‚ÇΩ

üíö **–í—Å–µ –≤–µ–≥–∞–Ω—Å–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–º–µ—á–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–∫–æ–º –≤ –º–µ–Ω—é!`
                ],
                confidence: 0.8,
                learnedCount: 0
            }
        };
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    loadSavedData() {
        try {
            const savedKnowledge = this.loadFromLocalStorage('coffeeAI_knowledge');
            const savedWeights = this.loadFromLocalStorage('coffeeAI_weights');
            const savedUnknown = this.loadFromLocalStorage('coffeeAI_unknown');

            if (savedKnowledge) {
                // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å –±–∞–∑–æ–≤—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏
                Object.keys(savedKnowledge).forEach(category => {
                    if (this.knowledgeBase[category]) {
                        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –æ—Ç–≤–µ—Ç—ã
                        this.knowledgeBase[category].patterns = [
                            ...new Set([...this.knowledgeBase[category].patterns, ...savedKnowledge[category].patterns])
                        ];
                        this.knowledgeBase[category].responses = [
                            ...new Set([...this.knowledgeBase[category].responses, ...savedKnowledge[category].responses])
                        ];
                        this.knowledgeBase[category].confidence = savedKnowledge[category].confidence;
                        this.knowledgeBase[category].learnedCount = savedKnowledge[category].learnedCount;
                    } else {
                        this.knowledgeBase[category] = savedKnowledge[category];
                    }
                });
            }
            
            if (savedWeights) {
                this.categoryWeights = { ...this.categoryWeights, ...savedWeights };
            }
            
            if (savedUnknown) {
                this.unknownQuestions = savedUnknown;
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö AI:', error);
        }
    }

    // –ê–Ω–∞–ª–∏–∑ –≤–æ–ø—Ä–æ—Å–∞ –∏ –ø–æ–∏—Å–∫ –ª—É—á—à–µ–≥–æ –æ—Ç–≤–µ—Ç–∞
    analyzeQuestion(question) {
        const lowerQuestion = question.toLowerCase();
        let bestMatch = null;
        let highestScore = 0;

        // –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        for (const [category, data] of Object.entries(this.knowledgeBase)) {
            const score = this.calculateMatchScore(lowerQuestion, data.patterns);
            const weightedScore = score * (this.categoryWeights[category] || 1.0) * data.confidence;
            
            if (weightedScore > highestScore) {
                highestScore = weightedScore;
                bestMatch = {
                    category: category,
                    score: weightedScore,
                    response: this.getRandomResponse(data.responses),
                    data: data
                };
            }
        }

        // –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–∞–±–æ–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
        if (highestScore < 0.3) {
            this.saveUnknownQuestion(question);
            return {
                category: 'unknown',
                response: this.getDefaultResponse(),
                score: highestScore,
                needsLearning: true
            };
        }

        return bestMatch;
    }

    // –†–∞—Å—á–µ—Ç —Å—Ç–µ–ø–µ–Ω–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    calculateMatchScore(question, patterns) {
        let score = 0;
        patterns.forEach(pattern => {
            if (question.includes(pattern)) {
                score += 1 / (1 + Math.abs(question.length - pattern.length));
            }
        });
        return Math.min(score, 1);
    }

    // –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–¥–±–µ–∫–∞
    learnFromFeedback(question, category, wasHelpful) {
        if (!this.knowledgeBase[category]) return;

        const data = this.knowledgeBase[category];
        
        if (wasHelpful) {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –¥–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω
            data.confidence = Math.min(data.confidence + this.learningRate, 1.0);
            this.categoryWeights[category] = (this.categoryWeights[category] || 1.0) + 0.05;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ –≤–æ–ø—Ä–æ—Å–∞
            const words = question.toLowerCase().split(' ').filter(word => word.length > 3);
            words.forEach(word => {
                if (!data.patterns.includes(word)) {
                    data.patterns.push(word);
                }
            });
        } else {
            // –£–º–µ–Ω—å—à–∞–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
            data.confidence = Math.max(data.confidence - this.learningRate, 0.1);
        }

        data.learnedCount++;
        this.saveKnowledge();
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞–Ω–∏—è
    addNewKnowledge(question, answer, category = 'general') {
        if (!this.knowledgeBase[category]) {
            this.knowledgeBase[category] = {
                patterns: [],
                responses: [],
                confidence: 0.7,
                learnedCount: 0
            };
        }

        const words = question.toLowerCase().split(' ').filter(word => word.length > 3);
        words.forEach(word => {
            if (!this.knowledgeBase[category].patterns.includes(word)) {
                this.knowledgeBase[category].patterns.push(word);
            }
        });

        if (!this.knowledgeBase[category].responses.includes(answer)) {
            this.knowledgeBase[category].responses.push(answer);
        }

        this.saveKnowledge();
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
    saveUnknownQuestion(question) {
        if (!this.unknownQuestions.includes(question)) {
            this.unknownQuestions.push(question);
            this.saveToLocalStorage('coffeeAI_unknown', this.unknownQuestions);
        }
    }

    // –°–ª—É—á–∞–π–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
    getRandomResponse(responses) {
        return responses[Math.floor(Math.random() * responses.length)];
    }

    // –û—Ç–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
    getDefaultResponse() {
        const defaults = [
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –Ø –µ—â–µ —É—á—É—Å—å. –ú–æ–∂–µ—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å –æ –º–µ–Ω—é, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏?",
            "–ü–æ–∫–∞ –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –æ –Ω–∞—à–µ–º –∫–æ—Ñ–µ –∏–ª–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö!",
            "–•–º, —ç—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ –º–æ–∏—Ö —Ç–µ–∫—É—â–∏—Ö –∑–Ω–∞–Ω–∏–π. –ù–∞—à–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–æ—á–Ω–æ –ø–æ–º–æ–≥—É—Ç - –ø–æ–∑–≤–æ–Ω–∏—Ç–µ +7 (495) 123-45-67",
            "–Ø –µ—â–µ —Ä–∞—Å—Ç—É –∏ –Ω–µ –≤—Å–µ –∑–Ω–∞—é üòä –°–ø—Ä–æ—Å–∏—Ç–µ –ª—É—á—à–µ –æ —è–ø–æ–Ω—Å–∫–æ–º –ª–∞—Ç—Ç–µ –∏–ª–∏ –∫–æ—Å–ø–ª–µ–π-–≤–µ—á–µ—Ä–∞—Ö!",
            "–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –ü–æ–∫–∞ —è –Ω–µ –º–æ–≥—É –Ω–∞ –Ω–µ–≥–æ –æ—Ç–≤–µ—Ç–∏—Ç—å, –Ω–æ –Ω–∞—à–∏ –±–∞—Ä–∏—Å—Ç–∞ —Ç–æ—á–Ω–æ –ø–æ–º–æ–≥—É—Ç - –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –≤ –∫–æ—Ñ–µ–π–Ω—É!"
        ];
        return defaults[Math.floor(Math.random() * defaults.length)];
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –≤ localStorage
    saveKnowledge() {
        this.saveToLocalStorage('coffeeAI_knowledge', this.knowledgeBase);
        this.saveToLocalStorage('coffeeAI_weights', this.categoryWeights);
    }

    saveToLocalStorage(key, data) {
        try {
            localStorage.setItem(key, JSON.stringify(data));
        } catch (e) {
            console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ localStorage:', e);
        }
    }

    loadFromLocalStorage(key) {
        try {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        } catch (e) {
            console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ localStorage:', e);
            return null;
        }
    }

    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è
    getLearningStats() {
        const stats = {
            totalCategories: Object.keys(this.knowledgeBase).length,
            totalLearned: 0,
            unknownQuestions: this.unknownQuestions.length,
            mostConfident: '',
            leastConfident: ''
        };

        let maxConfidence = 0;
        let minConfidence = 1;

        for (const [category, data] of Object.entries(this.knowledgeBase)) {
            stats.totalLearned += data.learnedCount;
            if (data.confidence > maxConfidence) {
                maxConfidence = data.confidence;
                stats.mostConfident = category;
            }
            if (data.confidence < minConfidence) {
                minConfidence = data.confidence;
                stats.leastConfident = category;
            }
        }

        return stats;
    }

    // –û—á–∏—Å—Ç–∫–∞ –∑–Ω–∞–Ω–∏–π (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    clearKnowledge() {
        localStorage.removeItem('coffeeAI_knowledge');
        localStorage.removeItem('coffeeAI_weights');
        localStorage.removeItem('coffeeAI_unknown');
        this.knowledgeBase = this.initKnowledgeBase();
        this.categoryWeights = {
            '–º–µ–Ω—é': 1.0, '–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è': 1.0, '–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ': 1.0, '—Ü–µ–Ω—ã': 1.0,
            '–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã': 1.0, '–ª–æ–∫–∞—Ü–∏—è': 1.0, '–∫–æ—Ñ–µ': 1.0, '–¥–µ—Å–µ—Ä—Ç—ã': 1.0,
            '–∏—Å—Ç–æ—Ä–∏—è': 1.0, '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è': 1.0, '—É—Å–ª—É–≥–∏': 1.0, '–∫–æ–Ω—Ç–∞–∫—Ç—ã': 1.0
        };
        this.unknownQuestions = [];
    }
}

// –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
window.CoffeeAI = CoffeeAI;